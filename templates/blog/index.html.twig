{% extends 'base.html.twig' %}

{% block title %}Blog{% endblock %}

{% block body %}

<div class="container-fluid">

    <div class="row mt-3">

{#         <div class="col-12"> #}

            {# Affichage du nombre total de publications (attribut apporté par knp_paginator) #}
            <div class="col-12 ps-4">
                <p class="text-left text-title-h1">Nombre total d'articles : </p>
            </div>

            {# S'il y a des publications, on affiche le menu de pagination #}


            {# Affichage des publications #}
            <div class="d-flex flex-row flex-md-nowrap flex-wrap justify-content-around">
        
            {# Boucle pour parcourir tous les publications à afficher #}
            {% for post in posts %}

                <div class="card m-3 bg-post">
                    <div class="card-header">
                        {# Titre de la publication, cliquable vers la page détaillée de celle-ci #}
                        <a class="text-decoration-none text-title-h1" href="{{ path('app_blog_show_post', {'slug': post.slug}) }}">{{ post.title }}</a>
                    </div>

                    <div class="card-body">
                        <div class="mb-2 text-justify">
                            {# Affichage du contenu de la publication, tronqué à 700 caractères, suivi de "..." et d'un lien "lire la suite" #}
                            {{ post.content|slice(0, 700) }}  ...
                            <a class="text-decoration-none text-title-h2" href="{{ path('app_blog_show_post', {'slug': post.slug}) }}"> Lire la suite</a>
                        </div>

                        {# Date et auteur de la publication et de la modification si nécessaire #}
                        <div class="my-2 text-muted">
                            Publié le <span class="text-warning">{{ post.createdAt|date('d/m/Y à H\\hi') }}</span> par <span class="text-success">Auteur</span>
                            {% if post.updatedAt %}
                                et modifié le <span class="text-warning">{{ post.updatedAt|date('d/m/Y à H\\hi') }}</span>
                            {% endif %}
                        </div>
                    </div>
                </div>

            {% else %}

                <div class="row">
                    <p class="col-12 text-center alert alert-warning">Aucune publication à afficher.</p>
                </div>

            {% endfor %}   

            </div>           

            {# S'il y a des publications, on affiche le menu de pagination #}

      {#   </div> #}

    </div>

</div>

{% endblock %}